# 前端代码规范 (Vue 3 + npm)

## 一、技术栈规范

### 1. 核心技术选型
- **框架**: Vue 3.x (使用 Composition API 和 `<script setup>`)
- **构建工具**: Vite
- **语言**: TypeScript (严格模式)
- **状态管理**: Pinia
- **路由**: Vue Router 4
- **样式方案**: Tailwind CSS 或 SCSS (推荐使用 CSS Modules)

### 2. 依赖管理
- 使用 **npm** 作为包管理工具。
- 遵循语义化版本控制，生产环境建议使用 `package-lock.json` 锁定版本。
- 执行 `npm install` 前确保已配置好内部镜像源（如果需要）。

## 二、代码风格指南

### 1. 命名约定
- **组件文件**: 大驼峰命名 (PascalCase)，如 `UserCard.vue`。
- **普通 JS/TS 文件**: 小写横杠命名 (kebab-case)，如 `use-auth.ts`。
- **变量与函数**: 小驼峰命名 (camelCase)，如 `const userInfo = ref()`。
- **常量**: 全大写下划线命名，如 `MAX_RETRY_COUNT`。
- **TypeScript 接口**: 大驼峰命名，如 `interface UserInfo {}`。

### 2. 代码格式化
- 使用 ESLint + Prettier + `eslint-plugin-vue`。
- 缩进使用 2 个空格。
- 使用单引号 `'`，末尾加分号 `;`。
- Vue 模板中属性换行：超过 3 个属性时强制换行。

## 三、组件开发规范

### 1. 设计原则
- **Composition API**: 统一使用 `<script setup>` 语法。
- **单一职责**: 每个组件逻辑尽量保持精简，复杂逻辑抽离为 Composable 函数。
- **Props 定义**: 必须使用 `defineProps` 显式定义类型和默认值。

### 2. 组件示例 (Vue 3 + TS)
```vue
<script setup lang="ts">
import { computed } from 'vue';

interface Props {
  title: string;
  status?: 'active' | 'inactive';
}

const props = withDefaults(defineProps<Props>(), {
  status: 'active'
});

const emit = defineEmits<{
  (e: 'update', id: number): void;
}>();

const statusText = computed(() => {
  return props.status === 'active' ? '在线' : '离线';
});

const handleUpdate = () => {
  emit('update', Date.now());
};
</script>

<template>
  <div class="card">
    <h3>{{ title }}</h3>
    <p>状态: {{ statusText }}</p>
    <button @click="handleUpdate" class="btn-primary">更新状态</button>
  </div>
</template>

<style scoped>
.card {
  padding: 1rem;
  border: 1px solid #eee;
  border-radius: 8px;
}
.btn-primary {
  background-color: #42b883;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 4px;
}
</style>
```

## 四、样式规范

### 1. 样式隔离
- 所有 `.vue` 文件中的 `<style>` 标签必须添加 `scoped` 属性。
- 推荐使用 Tailwind CSS 类名减少自定义 CSS。

### 2. 变量管理
- 共享的颜色、间距等应定义在全局 CSS 变量或 Tailwind 配置文件中。

## 五、性能优化规范

### 1. 路由懒加载
- 使用动态导入语法定义路由组件：`component: () => import('./views/Home.vue')`。

### 2. 资源优化
- 较小的图标使用内联 SVG 或图标库。
- 确保生产构建开启了代码压缩和 Tree Shaking。

## 六、工程化规范

### 1. 环境变量
- 使用 `.env.[mode]` 文件，变量名以 `VITE_APP_` 开头。

### 2. Git 提交
- 遵循规范的 Commit Message：`<type>(<scope>): <subject>`，如 `feat(user): add login logic`。

## 七、工具配置建议

### .eslintrc.js (核心部分)
```javascript
module.exports = {
  root: true,
  env: {
    node: true
  },
  extends: [
    'plugin:vue/vue3-recommended',
    '@vue/eslint-config-typescript',
    'prettier'
  ],
  rules: {
    'vue/multi-word-component-names': 'off',
    'vue/script-setup-uses-vars': 'error'
  }
};
```
