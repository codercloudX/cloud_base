# 全面测试计划

## 测试目标
1. **前端访问所有接口是否正常**
2. **后端访问数据是否正常**

## 测试范围

### 后端接口测试
- **认证接口**
  - 登录 (POST /api/auth/login)
  - 登出 (POST /api/auth/logout)
  - 获取当前用户信息 (GET /api/auth/me)

- **用户管理接口**
  - 获取用户列表 (GET /api/users)
  - 获取单个用户 (GET /api/users/{id})
  - 创建用户 (POST /api/users)
  - 更新用户 (PUT /api/users/{id})
  - 删除用户 (DELETE /api/users/{id})

- **部门管理接口**
  - 获取部门列表 (GET /api/departments)
  - 获取单个部门 (GET /api/departments/{id})
  - 创建部门 (POST /api/departments)
  - 更新部门 (PUT /api/departments/{id})
  - 删除部门 (DELETE /api/departments/{id})

- **角色管理接口**
  - 获取角色列表 (GET /api/roles)
  - 获取单个角色 (GET /api/roles/{id})
  - 创建角色 (POST /api/roles)
  - 更新角色 (PUT /api/roles/{id})
  - 删除角色 (DELETE /api/roles/{id})

- **权限管理接口**
  - 获取权限列表 (GET /api/permissions)
  - 获取单个权限 (GET /api/permissions/{id})
  - 创建权限 (POST /api/permissions)
  - 更新权限 (PUT /api/permissions/{id})
  - 删除权限 (DELETE /api/permissions/{id})

### 前端功能测试
- **认证功能**
  - 登录表单提交
  - 登录成功后跳转
  - 登出功能
  - 未登录状态下访问受保护页面的重定向

- **用户管理功能**
  - 查看用户列表（带分页）
  - 搜索用户
  - 查看用户详情
  - 创建新用户
  - 编辑用户信息
  - 删除用户

- **部门管理功能**
  - 查看部门列表
  - 查看部门详情
  - 创建新部门
  - 编辑部门信息
  - 删除部门

- **角色管理功能**
  - 查看角色列表
  - 查看角色详情
  - 创建新角色
  - 编辑角色信息
  - 删除角色

- **权限管理功能**
  - 查看权限列表
  - 查看权限详情
  - 创建新权限
  - 编辑权限信息
  - 删除权限

## 测试方法

### 后端接口测试
1. **使用 PowerShell 命令测试**
   - 使用 `Invoke-WebRequest` 命令模拟 HTTP 请求
   - 测试每个接口的不同请求方法和参数
   - 验证响应状态码和响应数据

2. **数据库验证**
   - 执行增删改操作后，直接查询数据库验证数据是否正确更新
   - 验证数据完整性和一致性

### 前端功能测试
1. **手动测试**
   - 启动前端开发服务器
   - 访问前端页面，测试各个功能模块
   - 验证所有 axios 调用是否正常工作
   - 测试错误处理和边界情况

2. **浏览器开发者工具**
   - 使用 Network 面板监控 API 请求和响应
   - 使用 Console 面板查看错误信息
   - 验证请求头、请求体和响应数据

## 测试步骤

### 1. 后端服务准备
1. 启动 Spring Boot 后端服务
2. 确保数据库连接正常
3. 确认后端服务运行在端口 8082

### 2. 前端服务准备
1. 启动前端开发服务器
2. 确保 Vite 代理配置正确，指向后端服务
3. 确认前端服务运行在预期端口

### 3. 后端接口测试
1. **认证接口测试**
   - 测试登录接口，获取 JWT token
   - 测试使用 token 获取当前用户信息
   - 测试登出接口

2. **用户管理接口测试**
   - 使用 token 测试获取用户列表
   - 测试创建新用户
   - 测试获取单个用户详情
   - 测试更新用户信息
   - 测试删除用户

3. **部门管理接口测试**
   - 测试获取部门列表
   - 测试创建新部门
   - 测试获取单个部门详情
   - 测试更新部门信息
   - 测试删除部门

4. **角色管理接口测试**
   - 测试获取角色列表
   - 测试创建新角色
   - 测试获取单个角色详情
   - 测试更新角色信息
   - 测试删除角色

5. **权限管理接口测试**
   - 测试获取权限列表
   - 测试创建新权限
   - 测试获取单个权限详情
   - 测试更新权限信息
   - 测试删除权限

### 4. 前端功能测试
1. **认证功能测试**
   - 打开前端登录页面
   - 输入正确的用户名和密码，测试登录
   - 验证登录成功后跳转
   - 测试登出功能
   - 尝试访问受保护页面，验证重定向到登录页

2. **用户管理功能测试**
   - 进入用户管理页面
   - 验证用户列表加载
   - 测试分页功能
   - 测试搜索功能
   - 测试创建新用户
   - 测试编辑用户
   - 测试删除用户

3. **部门管理功能测试**
   - 进入部门管理页面
   - 验证部门列表加载
   - 测试创建新部门
   - 测试编辑部门
   - 测试删除部门

4. **角色管理功能测试**
   - 进入角色管理页面
   - 验证角色列表加载
   - 测试创建新角色
   - 测试编辑角色
   - 测试删除角色

5. **权限管理功能测试**
   - 进入权限管理页面
   - 验证权限列表加载
   - 测试创建新权限
   - 测试编辑权限
   - 测试删除权限

## 预期结果
1. **后端接口**
   - 所有接口返回正确的状态码
   - 所有接口返回预期的响应数据
   - 数据库操作正确执行
   - 权限控制正常工作

2. **前端功能**
   - 所有页面正常加载
   - 所有 API 调用成功
   - 错误处理正常
   - 页面交互流畅

## 测试工具
- **PowerShell**：用于测试后端 API
- **浏览器开发者工具**：用于监控前端 API 调用
- **数据库客户端**：用于验证数据库操作
- **Postman**（可选）：用于更方便地测试 API

## 风险评估
1. **接口兼容性问题**：前端使用 axios 调用后端接口时可能出现参数格式或响应格式不匹配的问题
2. **权限验证问题**：JWT token 验证可能在某些场景下失败
3. **数据库操作问题**：MyBatis 映射可能存在问题，导致数据操作失败
4. **网络问题**：前端与后端之间的网络连接可能不稳定

## 应急方案
1. **接口兼容性问题**：检查前端 axios 配置和后端接口文档，确保参数和响应格式一致
2. **权限验证问题**：检查 JWT token 生成和验证逻辑，确保 token 正确传递和验证
3. **数据库操作问题**：检查 MyBatis 映射文件和 SQL 语句，确保数据操作正确
4. **网络问题**：检查网络连接和代理配置，确保前端能够正确访问后端服务

## 测试报告
测试完成后，将生成详细的测试报告，包括：
1. 测试覆盖的接口和功能
2. 测试结果（通过/失败）
3. 发现的问题和解决方案
4. 改进建议

## 测试时间估计
- 后端接口测试：约 1 小时
- 前端功能测试：约 1.5 小时
- 问题定位和修复：约 0.5 小时
- 总计：约 3 小时

## 测试负责人
- 后端接口测试：开发人员
- 前端功能测试：开发人员
- 测试报告编写：开发人员

## 审批
- 测试计划审批人：项目负责人
- 审批日期：______
